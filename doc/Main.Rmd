---
title: 'Title - To be defined'
runtime: 
output:
  html_document: default
  html_notebook: default
---

This is an *Interactive* [R Markdown](http://rmarkdown.rstudio.com) Notebook. It generates an HTML notebook that would allow users to interactively explore your analysis results. 

We will use the presidential inaugural speech word clouds as examples. 

## Step 0 - Install and load libraries
```{r, message=FALSE, warning=FALSE}

packages.used=c("tm", "wordcloud", "RColorBrewer", "dplyr", "tydytext")

# check packages that need to be installed.
packages.needed=setdiff(packages.used, 
                        intersect(installed.packages()[,1], 
                                  packages.used))
# install additional packages
if(length(packages.needed)>0){
  install.packages(packages.needed, dependencies = TRUE,
                   repos='http://cran.us.r-project.org')
}

# load packages
library(tm)
library(wordcloud)
library(RColorBrewer)
library(dplyr)
library(tidytext)
```

This notebook was prepared with the following environmental settings.

```{r}
print(R.version)
```

## Step 1 - Read in the speeches
```{r}
folder.path = "../data/InauguralSpeeches/"
speeches = list.files(path = folder.path, pattern = "*.txt")
prex.out = substr(speeches, 6, nchar(speeches)-4)

ff.all <- Corpus(DirSource(folder.path))
```

## Step 2 - Text processing

For the speeches, we remove extra white space, convert all letters to the lower case, remove [stop words](https://github.com/arc12/Text-Mining-Weak-Signals/wiki/Standard-set-of-english-stopwords), removed empty words due to formatting errors, and remove punctuation. Then we compute the [Document-Term Matrix (DTM)](https://en.wikipedia.org/wiki/Document-term_matrix). 

```{r}
ff.all<-tm_map(ff.all, stripWhitespace)
ff.all<-tm_map(ff.all, content_transformer(tolower))
ff.all<-tm_map(ff.all, removeWords, stopwords("english"))
ff.all<-tm_map(ff.all, removeWords, character(0))
ff.all<-tm_map(ff.all, removePunctuation)

tdm.all<-TermDocumentMatrix(ff.all)

tdm.tidy=tidy(tdm.all)

tdm.overall=summarise(group_by(tdm.tidy, term), sum(count))
```

## Step 3 - compute TF-IDF weighted document-term matrices for individual speeches. 
As we would like to identify interesting words for each inaugural speech, we use [TF-IDF](https://en.wikipedia.org/wiki/Tf%E2%80%93idf) to weigh each term within each speech. It highlights terms that are more specific for a particular speech. 

```{r}
dtm <- DocumentTermMatrix(ff.all,
                          control = list(weighting = function(x)
                                             weightTfIdf(x, normalize =FALSE),
                                         stopwords = TRUE))
ff.dtm=tidy(dtm)
```



